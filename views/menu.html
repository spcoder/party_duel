<template id="menuView">
  <div id="container">
    <h1>Party Duel</h1>
    <div id="actions" class="content">
      <button name="new">New Game</button>
      <button name="continue">Continue Game</button>
      <button name="exit">Exit</button>
    </div>
    <div id="newGameConfirmation" class="content">
      <h2>Are you sure?</h2>
      <button name="yes">Yes, start a new game</button>
      <button name="no">No, keep my existing game</button>
      <p>By starting a new game you'll lose all progress for your previous game.</p>
    </div>
  </div>
</template>

<script>
  app.addView({
    templateId: 'menuView',
    created: function(el) {
      const resetState = () => Object.keys(this.state).forEach(k => Reflect.set(this.state, k, Reflect.get(this.defaultState, k)));
      el.querySelector('#newGameConfirmation').style.display = 'none';
      el.querySelector('button[name=yes]').addEventListener('click', e => {
        e.preventDefault();
        resetState();
        this.nav('#board');
      });
      el.querySelector('button[name=no]').addEventListener('click', e => {
        e.preventDefault();
        el.querySelector('#newGameConfirmation').style.display = 'none';
        el.querySelector('#actions').style.display = 'block';
      });
      el.querySelector('button[name=new]').addEventListener('click', e => {
        e.preventDefault();
        if (previousGameExists()) {
          el.querySelector('#actions').style.display = 'none';
          el.querySelector('#newGameConfirmation').style.display = 'block';
        } else {
          resetState();
          this.nav('#board');
        }
      });
      el.querySelector('button[name=continue]').addEventListener('click', e => {
        e.preventDefault();
        this.nav('#board');
      });
      el.querySelector('button[name=exit]').addEventListener('click', e => {
        e.preventDefault();
        this.nav('#start');
      });
    }
  });
</script>

<style>
  #container {
    text-align: center;
    margin-top: 10vh;
  }

  h1 {
    font-size: 6rem;
    margin-bottom: 2rem;
    opacity: 0.5;
  }

  .content {
    width: 80%;
    max-width: 500px;
    margin: auto;
  }

  h2 {
    font-size: 4rem;
  }

  p {
    font-size: 1.5rem;
    margin: 2rem auto;
  }
</style>
